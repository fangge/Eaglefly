/*!
 * @project : huya-assets
 * @version : huya-client
 * @author  : Mrfangge
 * @update  : 2017-06-07 4:46:28 pm
 */(function(t,i,e,s){var n="jPages",a=null,h={containerID:"",first:false,previous:"← previous",next:"next →",last:false,links:"numeric",startPage:1,perPage:10,midRange:5,startRange:1,endRange:1,keyBrowse:false,scrollBrowse:false,pause:0,clickStop:false,delay:50,direction:"forward",animation:"",fallback:400,minHeight:true,callback:s};function r(s,n){this.options=t.extend({},h,n);this._container=t("#"+this.options.containerID);if(!this._container.length)return;this.jQwindow=t(i);this.jQdocument=t(e);this._holder=t(s);this._nav={};this._first=t(this.options.first);this._previous=t(this.options.previous);this._next=t(this.options.next);this._last=t(this.options.last);this._items=this._container.children(":visible");this._itemsShowing=t([]);this._itemsHiding=t([]);this._numPages=Math.ceil(this._items.length/this.options.perPage);this._currentPageNum=this.options.startPage;this._clicked=false;this._cssAnimSupport=this.getCSSAnimationSupport();this.init()}r.prototype={constructor:r,getCSSAnimationSupport:function(){var t=false,i="animation",e="",n="Webkit Moz O ms Khtml".split(" "),a="",h=this._container.get(0);if(h.style.animationName)t=true;if(t===false){for(var r=0;r<n.length;r++){if(h.style[n[r]+"AnimationName"]!==s){a=n[r];i=a+"Animation";e="-"+a.toLowerCase()+"-";t=true;break}}}return t},init:function(){this.setStyles();this.setNav();this.paginate(this._currentPageNum);this.setMinHeight()},setStyles:function(){var i="<style>"+".jp-invisible { visibility: hidden !important; } "+".jp-hidden { display: none !important; }"+"</style>";t(i).appendTo("head");if(this._cssAnimSupport&&this.options.animation.length)this._items.addClass("animated jp-hidden");else this._items.hide()},setNav:function(){var i=this.writeNav();this._holder.each(this.bind(function(e,s){var n=t(s);n.html(i);this.cacheNavElements(n,e);this.bindNavHandlers(e);this.disableNavSelection(s)},this));if(this.options.keyBrowse)this.bindNavKeyBrowse();if(this.options.scrollBrowse)this.bindNavScrollBrowse()},writeNav:function(){var t=1,i;i=this.writeBtn("first")+this.writeBtn("previous");for(;t<=this._numPages;t++){if(t===1&&this.options.startRange===0)i+="<span>...</span>";if(t>this.options.startRange&&t<=this._numPages-this.options.endRange)i+="<a href='#' class='jp-hidden'>";else i+="<a>";switch(this.options.links){case"numeric":i+=t;break;case"blank":break;case"title":var e=this._items.eq(t-1).attr("data-title");i+=e!==s?e:"";break}i+="</a>";if(t===this.options.startRange||t===this._numPages-this.options.endRange)i+="<span>...</span>"}i+=this.writeBtn("next")+this.writeBtn("last")+"</div>";return i},writeBtn:function(i){return this.options[i]!==false&&!t(this["_"+i]).length?"<a class='jp-"+i+"'>"+this.options[i]+"</a>":""},cacheNavElements:function(i,e){this._nav[e]={};this._nav[e].holder=i;this._nav[e].first=this._first.length?this._first:this._nav[e].holder.find("a.jp-first");this._nav[e].previous=this._previous.length?this._previous:this._nav[e].holder.find("a.jp-previous");this._nav[e].next=this._next.length?this._next:this._nav[e].holder.find("a.jp-next");this._nav[e].last=this._last.length?this._last:this._nav[e].holder.find("a.jp-last");this._nav[e].fstBreak=this._nav[e].holder.find("span:first");this._nav[e].lstBreak=this._nav[e].holder.find("span:last");this._nav[e].pages=this._nav[e].holder.find("a").not(".jp-first, .jp-previous, .jp-next, .jp-last");this._nav[e].permPages=this._nav[e].pages.slice(0,this.options.startRange).add(this._nav[e].pages.slice(this._numPages-this.options.endRange,this._numPages));this._nav[e].pagesShowing=t([]);this._nav[e].currentPage=t([])},bindNavHandlers:function(i){var e=this._nav[i];e.holder.bind("click.jPages",this.bind(function(i){var s=this.getNewPage(e,t(i.target));if(this.validNewPage(s)){this._clicked=true;this.paginate(s)}i.preventDefault()},this));if(this._first.length){this._first.bind("click.jPages",this.bind(function(){if(this.validNewPage(1)){this._clicked=true;this.paginate(1)}},this))}if(this._previous.length){this._previous.bind("click.jPages",this.bind(function(){var t=this._currentPageNum-1;if(this.validNewPage(t)){this._clicked=true;this.paginate(t)}},this))}if(this._next.length){this._next.bind("click.jPages",this.bind(function(){var t=this._currentPageNum+1;if(this.validNewPage(t)){this._clicked=true;this.paginate(t)}},this))}if(this._last.length){this._last.bind("click.jPages",this.bind(function(){if(this.validNewPage(this._numPages)){this._clicked=true;this.paginate(this._numPages)}},this))}},disableNavSelection:function(t){if(typeof t.onselectstart!="undefined")t.onselectstart=function(){return false};else if(typeof t.style.MozUserSelect!="undefined")t.style.MozUserSelect="none";else t.onmousedown=function(){return false}},bindNavKeyBrowse:function(){this.jQdocument.bind("keydown.jPages",this.bind(function(t){var i=t.target.nodeName.toLowerCase();if(this.elemScrolledIntoView()&&i!=="input"&&i!="textarea"){var e=this._currentPageNum;if(t.which==37)e=this._currentPageNum-1;if(t.which==39)e=this._currentPageNum+1;if(this.validNewPage(e)){this._clicked=true;this.paginate(e)}}},this))},elemScrolledIntoView:function(){var t,i,e,s;t=this.jQwindow.scrollTop();i=t+this.jQwindow.height();e=this._container.offset().top;s=e+this._container.height();return s>=t&&e<=i},bindNavScrollBrowse:function(){this._container.bind("mousewheel.jPages DOMMouseScroll.jPages",this.bind(function(t){var i=(t.originalEvent.wheelDelta||-t.originalEvent.detail)>0?this._currentPageNum-1:this._currentPageNum+1;if(this.validNewPage(i)){this._clicked=true;this.paginate(i)}t.preventDefault();return false},this))},getNewPage:function(t,i){if(i.is(t.currentPage))return this._currentPageNum;if(i.is(t.pages))return t.pages.index(i)+1;if(i.is(t.first))return 1;if(i.is(t.last))return this._numPages;if(i.is(t.previous))return t.pages.index(t.currentPage);if(i.is(t.next))return t.pages.index(t.currentPage)+2},validNewPage:function(t){return t!==this._currentPageNum&&t>0&&t<=this._numPages},paginate:function(i){var e,s;e=this.updateItems(i);s=this.updatePages(i);this._currentPageNum=i;if(t.isFunction(this.options.callback))this.callback(i,e,s);this.updatePause()},updateItems:function(t){var i=this.getItemRange(t);this._itemsHiding=this._itemsShowing;this._itemsShowing=this._items.slice(i.start,i.end);if(this._cssAnimSupport&&this.options.animation.length)this.cssAnimations(t);else this.jQAnimations(t);return i},getItemRange:function(t){var i={};i.start=(t-1)*this.options.perPage;i.end=i.start+this.options.perPage;if(i.end>this._items.length)i.end=this._items.length;return i},cssAnimations:function(t){clearInterval(this._delay);this._itemsHiding.removeClass(this.options.animation+" jp-invisible").addClass("jp-hidden");this._itemsShowing.removeClass("jp-hidden").addClass("jp-invisible");this._itemsOriented=this.getDirectedItems(t);this._index=0;this._delay=setInterval(this.bind(function(){if(this._index===this._itemsOriented.length)clearInterval(this._delay);else{this._itemsOriented.eq(this._index).removeClass("jp-invisible").addClass(this.options.animation)}this._index=this._index+1},this),this.options.delay)},jQAnimations:function(t){clearInterval(this._delay);this._itemsHiding.addClass("jp-hidden");this._itemsShowing.fadeTo(0,0).removeClass("jp-hidden");this._itemsOriented=this.getDirectedItems(t);this._index=0;this._delay=setInterval(this.bind(function(){if(this._index===this._itemsOriented.length)clearInterval(this._delay);else{this._itemsOriented.eq(this._index).fadeTo(this.options.fallback,1)}this._index=this._index+1},this),this.options.delay)},getDirectedItems:function(i){var e;switch(this.options.direction){case"backwards":e=t(this._itemsShowing.get().reverse());break;case"random":e=t(this._itemsShowing.get().sort(function(){return Math.round(Math.random())-.5}));break;case"auto":e=i>=this._currentPageNum?this._itemsShowing:t(this._itemsShowing.get().reverse());break;default:e=this._itemsShowing}return e},updatePages:function(t){var i,e,s;i=this.getInterval(t);for(e in this._nav){if(this._nav.hasOwnProperty(e)){s=this._nav[e];this.updateBtns(s,t);this.updateCurrentPage(s,t);this.updatePagesShowing(s,i);this.updateBreaks(s,i)}}return i},getInterval:function(t){var i,e,s,n;i=Math.ceil(this.options.midRange/2);e=this._numPages-this.options.midRange;s=t>i?Math.max(Math.min(t-i,e),0):0;n=t>i?Math.min(t+i-(this.options.midRange%2>0?1:0),this._numPages):Math.min(this.options.midRange,this._numPages);return{start:s,end:n}},updateBtns:function(t,i){if(i===1){t.first.addClass("jp-disabled");t.previous.addClass("jp-disabled")}if(i===this._numPages){t.next.addClass("jp-disabled");t.last.addClass("jp-disabled")}if(this._currentPageNum===1&&i>1){t.first.removeClass("jp-disabled");t.previous.removeClass("jp-disabled")}if(this._currentPageNum===this._numPages&&i<this._numPages){t.next.removeClass("jp-disabled");t.last.removeClass("jp-disabled")}},updateCurrentPage:function(t,i){t.currentPage.removeClass("jp-current");t.currentPage=t.pages.eq(i-1).addClass("jp-current")},updatePagesShowing:function(t,i){var e=t.pages.slice(i.start,i.end).not(t.permPages);t.pagesShowing.not(e).addClass("jp-hidden");e.not(t.pagesShowing).removeClass("jp-hidden");t.pagesShowing=e},updateBreaks:function(t,i){if(i.start>this.options.startRange||this.options.startRange===0&&i.start>0)t.fstBreak.removeClass("jp-hidden");else t.fstBreak.addClass("jp-hidden");if(i.end<this._numPages-this.options.endRange)t.lstBreak.removeClass("jp-hidden");else t.lstBreak.addClass("jp-hidden")},callback:function(t,i,e){var s={current:t,interval:e,count:this._numPages},n={showing:this._itemsShowing,oncoming:this._items.slice(i.start+this.options.perPage,i.end+this.options.perPage),range:i,count:this._items.length};s.interval.start=s.interval.start+1;n.range.start=n.range.start+1;this.options.callback(s,n)},updatePause:function(){if(this.options.pause&&this._numPages>1){clearTimeout(this._pause);if(this.options.clickStop&&this._clicked)return;else{this._pause=setTimeout(this.bind(function(){this.paginate(this._currentPageNum!==this._numPages?this._currentPageNum+1:1)},this),this.options.pause)}}},setMinHeight:function(){if(this.options.minHeight&&!this._container.is("table, tbody")){setTimeout(this.bind(function(){this._container.css({"min-height":this._container.css("height")})},this),1e3)}},bind:function(t,i){return function(){return t.apply(i,arguments)}},destroy:function(){this.jQdocument.unbind("keydown.jPages");this._container.unbind("mousewheel.jPages DOMMouseScroll.jPages");if(this.options.minHeight)this._container.css("min-height","");if(this._cssAnimSupport&&this.options.animation.length)this._items.removeClass("animated jp-hidden jp-invisible "+this.options.animation);else this._items.removeClass("jp-hidden").fadeTo(0,1);this._holder.unbind("click.jPages").empty()}};t.fn[n]=function(i){var e=t.type(i);if(e==="object"){if(this.length&&!t.data(this,n)){a=new r(this,i);this.each(function(){t.data(this,n,a)})}return this}if(e==="string"&&i==="destroy"){a.destroy();this.each(function(){t.removeData(this,n)});return this}if(e==="number"&&i%1===0){if(a.validNewPage(i))a.paginate(i);return this}return this}})(jQuery,window,document);